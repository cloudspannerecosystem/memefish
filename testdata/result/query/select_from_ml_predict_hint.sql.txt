--- select_from_ml_predict_hint.sql
-- https://cloud.google.com/spanner/docs/ml-tutorial-generative-ai?hl=en#register_a_generative_ai_model_in_a_schema
SELECT content
FROM ML.PREDICT(
        MODEL TextBison,
        (SELECT "Is 13 prime?" AS prompt),
        STRUCT(256 AS maxOutputTokens, 0.2 AS temperature, 40 as topK, 0.95 AS topP)
     ) @{remote_udf_max_rows_per_rpc=1}
--- AST
&ast.QueryStatement{
  Hint:  (*ast.Hint)(nil),
  With:  (*ast.With)(nil),
  Query: &ast.Select{
    Select:   116,
    Distinct: false,
    As:       nil,
    Results:  []ast.SelectItem{
      &ast.ExprSelectItem{
        Expr: &ast.Ident{
          NamePos: 123,
          NameEnd: 130,
          Name:    "content",
        },
      },
    },
    From: &ast.From{
      From:   131,
      Source: &ast.TVFCallExpr{
        Rparen: 306,
        Name:   &ast.Path{
          Idents: []*ast.Ident{
            &ast.Ident{
              NamePos: 136,
              NameEnd: 138,
              Name:    "ML",
            },
            &ast.Ident{
              NamePos: 139,
              NameEnd: 146,
              Name:    "PREDICT",
            },
          },
        },
        Args: []ast.TVFArg{
          &ast.ModelArg{
            Model: 156,
            Name:  &ast.Path{
              Idents: []*ast.Ident{
                &ast.Ident{
                  NamePos: 162,
                  NameEnd: 171,
                  Name:    "TextBison",
                },
              },
            },
          },
          &ast.ExprArg{
            Expr: &ast.ScalarSubQuery{
              Lparen: 181,
              Rparen: 213,
              Query:  &ast.Select{
                Select:   182,
                Distinct: false,
                As:       nil,
                Results:  []ast.SelectItem{
                  &ast.Alias{
                    Expr: &ast.StringLiteral{
                      ValuePos: 189,
                      ValueEnd: 203,
                      Value:    "Is 13 prime?",
                    },
                    As: &ast.AsAlias{
                      As:    204,
                      Alias: &ast.Ident{
                        NamePos: 207,
                        NameEnd: 213,
                        Name:    "prompt",
                      },
                    },
                  },
                },
                From:    (*ast.From)(nil),
                Where:   (*ast.Where)(nil),
                GroupBy: (*ast.GroupBy)(nil),
                Having:  (*ast.Having)(nil),
                OrderBy: (*ast.OrderBy)(nil),
                Limit:   (*ast.Limit)(nil),
              },
            },
          },
          &ast.ExprArg{
            Expr: &ast.TypelessStructLiteral{
              Struct: 224,
              Rparen: 299,
              Values: []ast.TypelessStructLiteralArg{
                &ast.Alias{
                  Expr: &ast.IntLiteral{
                    ValuePos: 231,
                    ValueEnd: 234,
                    Base:     10,
                    Value:    "256",
                  },
                  As: &ast.AsAlias{
                    As:    235,
                    Alias: &ast.Ident{
                      NamePos: 238,
                      NameEnd: 253,
                      Name:    "maxOutputTokens",
                    },
                  },
                },
                &ast.Alias{
                  Expr: &ast.FloatLiteral{
                    ValuePos: 255,
                    ValueEnd: 258,
                    Value:    "0.2",
                  },
                  As: &ast.AsAlias{
                    As:    259,
                    Alias: &ast.Ident{
                      NamePos: 262,
                      NameEnd: 273,
                      Name:    "temperature",
                    },
                  },
                },
                &ast.Alias{
                  Expr: &ast.IntLiteral{
                    ValuePos: 275,
                    ValueEnd: 277,
                    Base:     10,
                    Value:    "40",
                  },
                  As: &ast.AsAlias{
                    As:    278,
                    Alias: &ast.Ident{
                      NamePos: 281,
                      NameEnd: 285,
                      Name:    "topK",
                    },
                  },
                },
                &ast.Alias{
                  Expr: &ast.FloatLiteral{
                    ValuePos: 287,
                    ValueEnd: 291,
                    Value:    "0.95",
                  },
                  As: &ast.AsAlias{
                    As:    292,
                    Alias: &ast.Ident{
                      NamePos: 295,
                      NameEnd: 299,
                      Name:    "topP",
                    },
                  },
                },
              },
            },
          },
        },
        NamedArgs: []*ast.NamedArg(nil),
        Hint:      &ast.Hint{
          Atmark:  308,
          Rbrace:  339,
          Records: []*ast.HintRecord{
            &ast.HintRecord{
              Key: &ast.Ident{
                NamePos: 310,
                NameEnd: 337,
                Name:    "remote_udf_max_rows_per_rpc",
              },
              Value: &ast.IntLiteral{
                ValuePos: 338,
                ValueEnd: 339,
                Base:     10,
                Value:    "1",
              },
            },
          },
        },
        Sample: (*ast.TableSample)(nil),
      },
    },
    Where:   (*ast.Where)(nil),
    GroupBy: (*ast.GroupBy)(nil),
    Having:  (*ast.Having)(nil),
    OrderBy: (*ast.OrderBy)(nil),
    Limit:   (*ast.Limit)(nil),
  },
}

--- SQL
SELECT content FROM ML.PREDICT(MODEL TextBison, (SELECT "Is 13 prime\?" AS prompt), STRUCT(256 AS maxOutputTokens, 0.2 AS temperature, 40 AS topK, 0.95 AS topP)) @{remote_udf_max_rows_per_rpc=1}
